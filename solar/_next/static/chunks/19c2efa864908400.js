(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88249,(e,t,a)=>{t.exports=e.r(50934)},69824,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let r=e.r(30438);function l({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},30434,(e,t,a)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"encodeURIPath",{enumerable:!0,get:function(){return r}})},33737,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return o}});let r=e.r(10267),l=e.r(92395),s=e.r(34767),n=e.r(30434),i=e.r(45679);function o({moduleIds:e}){if("u">typeof window)return null;let t=s.workAsyncStorage.getStore();if(void 0===t)return null;let a=[];if(t.reactLoadableManifest&&e){let r=t.reactLoadableManifest;for(let t of e){if(!r[t])continue;let e=r[t].files;a.push(...e)}}if(0===a.length)return null;let o=(0,i.getDeploymentIdQueryOrEmptyString)();return(0,r.jsx)(r.Fragment,{children:a.map(e=>{let a=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${o}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:a,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(a,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},72957,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return c}});let r=e.r(10267),l=e.r(56068),s=e.r(69824),n=e.r(33737);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},a=(0,l.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?l.Suspense:l.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:["u"<typeof window?(0,r.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(a,{...e})]}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(d,{...o?{fallback:i}:{},children:u})}return d.displayName="LoadableComponent",d}},69782,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return l}});let r=e.r(13288)._(e.r(72957));function l(e,t){let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,r.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},93732,e=>{"use strict";var t=e.i(10267),a=e.i(56068),r=e.i(88249);let l=(0,e.i(69782).default)(()=>e.A(73117),{loadableGenerated:{modules:[73383]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-[400px] bg-gray-100 rounded-lg flex items-center justify-center text-gray-400",children:"Loading map..."})}),s="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar",n=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function i({label:e,sortKey:a,currentSort:r,currentDir:l,onSort:s,align:n}){let i=r===a;return(0,t.jsxs)("th",{className:`${"right"===n?"text-right":"text-left"} px-4 py-3 font-medium text-gray-500 cursor-pointer hover:text-gray-900 select-none`,onClick:()=>s(a),children:[e," ",(0,t.jsx)("span",{className:i?"text-blue-600":"text-gray-300",children:i?"asc"===l?"▲":"▼":"▴"})]})}function o(){let e=(0,r.useSearchParams)(),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[b,f]=(0,a.useState)({state:e.get("state")||"",min_size:e.get("min_size")||"",max_size:e.get("max_size")||"",start_date:e.get("start_date")||"",end_date:e.get("end_date")||"",site_type:e.get("site_type")||"",installer:e.get("installer")||"",owner:e.get("owner")||"",q:e.get("q")||""}),[j,_]=(0,a.useState)(1),[N,v]=(0,a.useState)("capacity_mw"),[w,S]=(0,a.useState)("desc"),k=(0,a.useCallback)(async e=>{x(!0);let t=new URLSearchParams({page:String(e),limit:"25"});Object.entries(b).forEach(([e,a])=>{a&&t.set(e,a)});try{let e=await fetch(`${s}/installations?${t}`),a=await e.json();c(a.data||[]),u(a.pagination)}catch(e){console.error(e)}finally{x(!1)}},[b]);(0,a.useEffect)(()=>{k(j)},[j,k]);let C=e=>{N===e?S(e=>"asc"===e?"desc":"asc"):(v(e),S("capacity_mw"===e?"desc":"asc"))},P=async()=>{g(!0);let e=new URLSearchParams;Object.entries(b).forEach(([t,a])=>{a&&e.set(t,a)}),e.set("limit","10000");try{let t=await fetch(`${s}/export?${e}`),a=await t.blob(),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`solar_installations_${new Date().toISOString().slice(0,10)}.csv`,l.click(),URL.revokeObjectURL(r)}catch(e){console.error("Export failed:",e)}finally{g(!1)}},O=(0,a.useMemo)(()=>[...o].sort((e,t)=>{let a=null,r=null;switch(N){case"site_name":a=e.site_name||e.county||"",r=t.site_name||t.county||"";break;case"state":a=e.state||"",r=t.state||"";break;case"site_type":a=e.site_type,r=t.site_type;break;case"capacity_mw":a=Number(e.capacity_mw)||0,r=Number(t.capacity_mw)||0;break;case"install_date":a=e.install_date||"",r=t.install_date||"";break;case"tracking_type":a=e.tracking_type||"",r=t.tracking_type||"";break;case"owner_name":a=e.owner_name||"",r=t.owner_name||""}null===a&&(a=""),null===r&&(r="");let l="number"==typeof a&&"number"==typeof r?a-r:String(a).localeCompare(String(r));return"asc"===w?l:-l}),[o,N,w]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Search Installations"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_(1),k(1)},className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Search"}),(0,t.jsx)("input",{type:"text",value:b.q,onChange:e=>f({...b,q:e.target.value}),placeholder:"Site name, county...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,t.jsxs)("select",{value:b.state,onChange:e=>f({...b,state:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All States"}),n.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Type"}),(0,t.jsxs)("select",{value:b.site_type,onChange:e=>f({...b,site_type:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"utility",children:"Utility"}),(0,t.jsx)("option",{value:"commercial",children:"Commercial"}),(0,t.jsx)("option",{value:"community",children:"Community"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Size (kW)"}),(0,t.jsx)("input",{type:"number",value:b.min_size,onChange:e=>f({...b,min_size:e.target.value}),placeholder:"e.g. 1000",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Size (kW)"}),(0,t.jsx)("input",{type:"number",value:b.max_size,onChange:e=>f({...b,max_size:e.target.value}),placeholder:"e.g. 50000",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installer"}),(0,t.jsx)("input",{type:"text",value:b.installer,onChange:e=>f({...b,installer:e.target.value}),placeholder:"Installer name...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),(0,t.jsx)("input",{type:"text",value:b.owner,onChange:e=>f({...b,owner:e.target.value}),placeholder:"Owner name...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end gap-2",children:(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-blue-700",children:"Search"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,t.jsx)("input",{type:"date",value:b.start_date,onChange:e=>f({...b,start_date:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,t.jsx)("input",{type:"date",value:b.end_date,onChange:e=>f({...b,end_date:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsx)("button",{onClick:()=>y(!p),className:`px-4 py-2 rounded-md text-sm font-medium border transition ${p?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:p?"Hide Map":"Show Map"})}),(0,t.jsx)("button",{onClick:P,disabled:h||!d?.total,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:h?"Exporting...":`Export CSV${d?.total?` (${Math.min(d.total,1e4).toLocaleString()})`:""}`})]}),p&&o.length>0&&(0,t.jsx)(l,{installations:o}),m?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Searching..."}):(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[d.total.toLocaleString()," results found"]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)(i,{label:"Site",sortKey:"site_name",currentSort:N,currentDir:w,onSort:C}),(0,t.jsx)(i,{label:"State",sortKey:"state",currentSort:N,currentDir:w,onSort:C}),(0,t.jsx)(i,{label:"Type",sortKey:"site_type",currentSort:N,currentDir:w,onSort:C}),(0,t.jsx)(i,{label:"Owner",sortKey:"owner_name",currentSort:N,currentDir:w,onSort:C}),(0,t.jsx)(i,{label:"Capacity",sortKey:"capacity_mw",currentSort:N,currentDir:w,onSort:C,align:"right"}),(0,t.jsx)(i,{label:"Year",sortKey:"install_date",currentSort:N,currentDir:w,onSort:C}),(0,t.jsx)(i,{label:"Tracking",sortKey:"tracking_type",currentSort:N,currentDir:w,onSort:C})]})}),(0,t.jsxs)("tbody",{children:[O.map(e=>(0,t.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("a",{href:`/solar/site/?id=${e.id}`,className:"text-blue-600 hover:underline font-medium",children:e.site_name||e.county||"Unknown"}),e.county&&e.site_name&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:e.county})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.state}),(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.site_type}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.owner_name||(0,t.jsx)("span",{className:"text-gray-300",children:"-"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono",children:e.capacity_mw?`${Number(e.capacity_mw).toFixed(1)} MW`:e.capacity_dc_kw?`${Number(e.capacity_dc_kw).toLocaleString()} kW`:"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.install_date?.substring(0,4)||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.tracking_type||"-"})]},e.id)),0===o.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-400",children:"No results found"})})]})]})}),d&&d.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===j,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",j," of ",d.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>_(e=>Math.min(d.totalPages,e+1)),disabled:j>=d.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}function c(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading search..."}),children:(0,t.jsx)(o,{})})}e.s(["default",()=>c])},73117,e=>{e.v(t=>Promise.all(["static/chunks/2394e0339a3313da.js"].map(t=>e.l(t))).then(()=>t(73383)))}]);