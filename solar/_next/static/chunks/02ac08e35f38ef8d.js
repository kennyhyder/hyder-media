(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99504,e=>{"use strict";var t=e.i(10267),s=e.i(56068);let a="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar",l=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function n(){let[e,n]=(0,s.useState)([]),[i,r]=(0,s.useState)(null),[o,d]=(0,s.useState)(!1),[c,x]=(0,s.useState)({name:"",state:"",min_installations:"",sort:"installation_count"}),[m,h]=(0,s.useState)(1),u=(0,s.useCallback)(async e=>{d(!0);let t=new URLSearchParams({page:String(e),limit:"50"});Object.entries(c).forEach(([e,s])=>{s&&t.set(e,s)});try{let e=await fetch(`${a}/installers?${t}`),s=await e.json();n(s.data||[]),r(s.pagination)}catch(e){console.error(e)}finally{d(!1)}},[c]);return(0,s.useEffect)(()=>{u(m)},[m,u]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Installer Directory"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Browse solar installers with portfolio stats and installation history"})]}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),h(1),u(1)},className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,t.jsx)("input",{type:"text",value:c.name,onChange:e=>x({...c,name:e.target.value}),placeholder:"Search installers...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,t.jsxs)("select",{value:c.state,onChange:e=>x({...c,state:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All States"}),l.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Installations"}),(0,t.jsx)("input",{type:"number",value:c.min_installations,onChange:e=>x({...c,min_installations:e.target.value}),placeholder:"e.g. 5",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,t.jsxs)("select",{value:c.sort,onChange:e=>x({...c,sort:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"installation_count",children:"Installation Count"}),(0,t.jsx)("option",{value:"total_capacity_kw",children:"Total Capacity"}),(0,t.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,t.jsx)("option",{value:"last_seen",children:"Most Recent"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-blue-700",children:"Search"})})]})}),o?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading installers..."}):(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[i.total.toLocaleString()," installers found"]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[e.map(e=>{let s=e.total_capacity_kw?e.total_capacity_kw>=1e3?`${(e.total_capacity_kw/1e3).toFixed(1)} MW`:`${Math.round(e.total_capacity_kw)} kW`:null,a=e.first_seen&&e.last_seen?`${e.first_seen.substring(0,4)}\u2013${e.last_seen.substring(0,4)}`:e.last_seen?e.last_seen.substring(0,4):null;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5 hover:shadow-md transition",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-sm text-gray-500",children:[(e.city||e.state)&&(0,t.jsx)("span",{children:[e.city,e.state].filter(Boolean).join(", ")}),e.phone&&(0,t.jsx)("span",{children:e.phone})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.website&&(0,t.jsxs)("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Website"]}),(0,t.jsxs)("a",{href:`/solar/search/?installer=${encodeURIComponent(e.name)}`,className:"inline-flex items-center gap-1.5 px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"View Installations"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 shrink-0 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.installation_count.toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"installs"})]}),s&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"capacity"})]})]})]}),a&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 text-xs text-gray-400",children:["Active ",a]})]},e.id)}),0===e.length&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No installers found. Try adjusting your search."})]}),i&&i.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===m,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",m," of ",i.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>h(e=>Math.min(i.totalPages,e+1)),disabled:m>=i.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}e.s(["default",()=>n])}]);