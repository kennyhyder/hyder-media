(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88249,(e,t,a)=>{t.exports=e.r(50934)},30085,e=>{"use strict";var t=e.i(10267);let a={installer:"bg-blue-100 text-blue-700",owner:"bg-green-100 text-green-700",developer:"bg-purple-100 text-purple-700",operator:"bg-amber-100 text-amber-700",manufacturer:"bg-red-100 text-red-700"};function s({role:e}){let s=a[e]||"bg-gray-100 text-gray-700";return(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium capitalize ${s}`,children:e})}e.s(["default",()=>s])},30785,e=>{"use strict";var t=e.i(10267),a=e.i(56068),s=e.i(88249),l=e.i(30085);let r="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar",n=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],i=[{value:"all",label:"All"},{value:"installer",label:"Installers"},{value:"owner",label:"Owners"},{value:"developer",label:"Developers"},{value:"operator",label:"Operators"},{value:"manufacturer",label:"Manufacturers"}];function d(){let e=(0,s.useSearchParams)(),[d,c]=(0,a.useState)([]),[o,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[p,h]=(0,a.useState)({type:e.get("type")||"all",name:e.get("name")||"",state:e.get("state")||"",sort:e.get("sort")||"site_count",min_sites:e.get("min_sites")||""}),[g,b]=(0,a.useState)(1),y=(0,a.useCallback)(async e=>{u(!0);let t=new URLSearchParams({page:String(e),limit:"50"});Object.entries(p).forEach(([e,a])=>{a&&t.set(e,a)});try{let e=await fetch(`${r}/directory?${t}`),a=await e.json();c(a.data||[]),x(a.pagination)}catch(e){console.error(e)}finally{u(!1)}},[p]);return(0,a.useEffect)(()=>{y(g)},[g,y]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Business Directory"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Browse installers, owners, developers, operators, and equipment manufacturers"})]}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),b(1),y(1)},className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,t.jsx)("input",{type:"text",value:p.name,onChange:e=>h({...p,name:e.target.value}),placeholder:"Search by name...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,t.jsx)("select",{value:p.type,onChange:e=>h({...p,type:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,t.jsxs)("select",{value:p.state,onChange:e=>h({...p,state:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All States"}),n.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,t.jsxs)("select",{value:p.sort,onChange:e=>h({...p,sort:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"site_count",children:"Most Sites"}),(0,t.jsx)("option",{value:"capacity",children:"Largest Capacity"}),(0,t.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,t.jsx)("option",{value:"recent",children:"Most Recent"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-blue-700",children:"Search"})})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>(0,t.jsx)("button",{onClick:()=>{var t;return t=e.value,void(h({...p,type:t}),b(1))},className:`px-3 py-1.5 rounded-full text-sm font-medium transition ${p.type===e.value?"bg-blue-600 text-white":"bg-white text-gray-600 border hover:bg-gray-50"}`,children:e.label},e.value))}),m?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading directory..."}):(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[o.total.toLocaleString()," entities found"]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[d.map((e,a)=>{var s;let r=(s=e.capacity_mw)?s>=1e3?`${(s/1e3).toFixed(1)} GW`:s>=1?`${s.toFixed(1)} MW`:`${Math.round(1e3*s)} kW`:null,n=e.id?`/solar/company/?id=${e.id}&role=${e.role}`:`/solar/company/?name=${encodeURIComponent(e.name)}&role=${e.role}`;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-5 hover:shadow-md transition",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg truncate",children:(0,t.jsx)("a",{href:n,className:"hover:text-blue-600",children:e.name})}),(0,t.jsx)(l.default,{role:e.role})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-sm text-gray-500",children:[(e.city||e.state)&&(0,t.jsx)("span",{children:[e.city,e.state].filter(Boolean).join(", ")}),e.phone&&(0,t.jsx)("span",{children:e.phone}),e.equipment_types&&(0,t.jsx)("span",{className:"text-gray-400",children:e.equipment_types.join(", ")})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.website&&(0,t.jsx)("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition",children:"Website"}),(0,t.jsx)("a",{href:n,className:"inline-flex items-center gap-1.5 px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition",children:"View Profile"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 shrink-0 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.site_count.toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"sites"})]}),r&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"capacity"})]}),e.equipment_count&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.equipment_count.toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:"equipment"})]})]})]})},`${e.role}-${e.id||e.name}-${a}`)}),0===d.length&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No entities found. Try adjusting your search."})]}),o&&o.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===g,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",g," of ",o.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>b(e=>Math.min(o.totalPages,e+1)),disabled:g>=o.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}function c(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"text-gray-500 py-12 text-center",children:"Loading directory..."}),children:(0,t.jsx)(d,{})})}e.s(["default",()=>c])}]);