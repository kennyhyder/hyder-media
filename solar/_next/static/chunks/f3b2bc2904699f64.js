(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58884,e=>{"use strict";var t=e.i(10267),r=e.i(56068);function i({installations:i,center:a=[39.8,-98.5],zoom:l=4,height:n="400px",onMarkerClick:o}){let s=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);return((0,r.useEffect)(()=>{u(!0)},[]),(0,r.useEffect)(()=>{let t;if(!c||!s.current)return;let r=!1;return(async()=>{let n=await e.A(33390);if(delete n.Icon.Default.prototype._getIconUrl,n.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),r||!s.current)return;m.current&&m.current.remove(),m.current=t=n.map(s.current).setView(a,l);let c=n.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri",maxZoom:19}),u=n.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19});c.addTo(t),n.control.layers({Satellite:c,Street:u},{},{position:"topright"}).addTo(t);let p={utility:"#2563eb",commercial:"#16a34a",community:"#9333ea"},d=i.filter(e=>e.latitude&&e.longitude).slice(0,1e3);for(let e of d){let r=p[e.site_type]||"#6b7280",i=e.capacity_mw?`${Number(e.capacity_mw).toFixed(1)} MW`:e.capacity_dc_kw?`${Number(e.capacity_dc_kw).toLocaleString()} kW`:"Unknown",a=n.circleMarker([Number(e.latitude),Number(e.longitude)],{radius:Math.min(12,Math.max(4,3*Math.log2((Number(e.capacity_mw)||.1)+1))),fillColor:r,color:"#fff",weight:1,fillOpacity:.7}).addTo(t);a.bindPopup(`<div style="min-width:180px">
            <strong>${e.site_name||e.county||"Unknown"}</strong><br/>
            <span style="color:${r};font-weight:600;text-transform:capitalize">${e.site_type}</span><br/>
            ${i}<br/>
            ${[e.city,e.county,e.state].filter(Boolean).join(", ")}<br/>
            ${e.install_date?`Installed: ${e.install_date.substring(0,4)}`:""}
            ${o?`<br/><a href="/solar/site/?id=${e.id}" style="color:#2563eb">View Details &rarr;</a>`:""}
          </div>`),o&&a.on("click",()=>o(e.id))}if(d.length>0){let e=n.latLngBounds(d.map(e=>[Number(e.latitude),Number(e.longitude)]));t.fitBounds(e,{padding:[20,20],maxZoom:12})}})(),()=>{r=!0,m.current&&(m.current.remove(),m.current=null)}},[c,i,a,l,o]),c)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"}),(0,t.jsx)("div",{ref:s,style:{height:n},className:"rounded-lg z-0"})]}):(0,t.jsx)("div",{style:{height:n},className:"bg-gray-100 rounded-lg flex items-center justify-center text-gray-400",children:"Loading map..."})}e.s(["default",()=>i])},73383,e=>{e.n(e.i(58884))},33390,e=>{e.v(t=>Promise.all(["static/chunks/e077fa7ba4c949db.js"].map(t=>e.l(t))).then(()=>t(35315)))}]);