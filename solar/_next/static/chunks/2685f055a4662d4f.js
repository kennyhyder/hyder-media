(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9838,e=>{"use strict";var t=e.i(10267),a=e.i(56068);let s="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar";function r({label:e,sortKey:a,currentSort:s,currentDir:r,onSort:l,align:n}){let i=s===a;return(0,t.jsxs)("th",{className:`${"right"===n?"text-right":"text-left"} px-4 py-3 font-medium text-gray-500 cursor-pointer hover:text-gray-900 select-none`,onClick:()=>l(a),children:[e," ",(0,t.jsx)("span",{className:i?"text-blue-600":"text-gray-300",children:i?"asc"===r?"▲":"▼":"▴"})]})}function l(){let[e,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),[d,m]=(0,a.useState)({manufacturer:"",model:"",equipment_type:"",min_age_years:"",state:""}),[u,x]=(0,a.useState)(1),[p,h]=(0,a.useState)("capacity"),[y,g]=(0,a.useState)("desc"),j=(0,a.useCallback)(async e=>{o(!0);let t=new URLSearchParams({page:String(e),limit:"25"});Object.entries(d).forEach(([e,a])=>{a&&t.set(e,a)});try{let e=await fetch(`${s}/equipment?${t}`),a=await e.json();l(a.data||[]),i(a.pagination)}catch(e){console.error(e)}finally{o(!1)}},[d]);(0,a.useEffect)(()=>{j(u)},[u,j]);let b=e=>{p===e?g(e=>"asc"===e?"desc":"asc"):(h(e),g("capacity"===e?"desc":"asc"))},f=(0,a.useMemo)(()=>[...e].sort((e,t)=>{let a="",s="";switch(p){case"equipment_type":a=e.equipment_type,s=t.equipment_type;break;case"manufacturer":a=e.manufacturer||"",s=t.manufacturer||"";break;case"technology":a=e.module_technology||"",s=t.module_technology||"";break;case"site":a=e.installation.site_name||"",s=t.installation.site_name||"";break;case"location":a=e.installation.state||"",s=t.installation.state||"";break;case"capacity":a=Number(e.installation.capacity_mw)||0,s=Number(t.installation.capacity_mw)||0;break;case"year":a=e.installation.install_date||"",s=t.installation.install_date||""}let r="number"==typeof a&&"number"==typeof s?a-s:String(a).localeCompare(String(s));return"asc"===y?r:-r}),[e,p,y]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Equipment Search"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Search solar equipment across all installations by manufacturer, model, and age"})]}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),x(1),j(1)},className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),(0,t.jsx)("input",{type:"text",value:d.manufacturer,onChange:e=>m({...d,manufacturer:e.target.value}),placeholder:"e.g. First Solar",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,t.jsx)("input",{type:"text",value:d.model,onChange:e=>m({...d,model:e.target.value}),placeholder:"e.g. Series 6",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,t.jsxs)("select",{value:d.equipment_type,onChange:e=>m({...d,equipment_type:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"module",children:"Module/Panel"}),(0,t.jsx)("option",{value:"inverter",children:"Inverter"}),(0,t.jsx)("option",{value:"battery",children:"Battery"}),(0,t.jsx)("option",{value:"tracker",children:"Tracker"}),(0,t.jsx)("option",{value:"racking",children:"Racking"}),(0,t.jsx)("option",{value:"transformer",children:"Transformer"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Age (years)"}),(0,t.jsx)("input",{type:"number",value:d.min_age_years,onChange:e=>m({...d,min_age_years:e.target.value}),placeholder:"e.g. 10",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-green-700",children:"Search Equipment"})})]})}),c?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Searching..."}):(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[n.total.toLocaleString()," equipment records found"]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)(r,{label:"Type",sortKey:"equipment_type",currentSort:p,currentDir:y,onSort:b}),(0,t.jsx)(r,{label:"Manufacturer",sortKey:"manufacturer",currentSort:p,currentDir:y,onSort:b}),(0,t.jsx)(r,{label:"Technology",sortKey:"technology",currentSort:p,currentDir:y,onSort:b}),(0,t.jsx)(r,{label:"Site",sortKey:"site",currentSort:p,currentDir:y,onSort:b}),(0,t.jsx)(r,{label:"Location",sortKey:"location",currentSort:p,currentDir:y,onSort:b}),(0,t.jsx)(r,{label:"Capacity",sortKey:"capacity",currentSort:p,currentDir:y,onSort:b,align:"right"}),(0,t.jsx)(r,{label:"Year",sortKey:"year",currentSort:p,currentDir:y,onSort:b})]})}),(0,t.jsxs)("tbody",{children:[f.map(e=>(0,t.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.equipment_type}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[e.manufacturer||(0,t.jsx)("span",{className:"text-gray-300",children:"-"}),e.model&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:e.model})]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-gray-500",children:[e.module_technology||(0,t.jsx)("span",{className:"text-gray-300",children:"-"}),e.module_wattage_w&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[e.module_wattage_w,"W"]})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("a",{href:`/solar/site/?id=${e.installation.id}`,className:"text-blue-600 hover:underline",children:e.installation.site_name||"Unknown"})}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[e.installation.state,e.installation.county&&(0,t.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.installation.county,")"]})]}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono",children:e.installation.capacity_mw?`${Number(e.installation.capacity_mw).toFixed(1)} MW`:"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.installation.install_date?.substring(0,4)||"-"})]},e.id)),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-400",children:"No equipment found. Try adjusting your search."})})]})]})}),n&&n.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",u," of ",n.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>x(e=>Math.min(n.totalPages,e+1)),disabled:u>=n.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}e.s(["default",()=>l])}]);