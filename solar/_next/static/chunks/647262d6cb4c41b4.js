(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93732,e=>{"use strict";var t=e.i(10267),a=e.i(56068);let s="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar",l=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function i(){let[e,i]=(0,a.useState)([]),[d,n]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)({state:"",min_size:"",max_size:"",start_date:"",end_date:"",site_type:"",q:""}),[o,u]=(0,a.useState)(1),h=(0,a.useCallback)(async e=>{c(!0);let t=new URLSearchParams({page:String(e),limit:"25"});Object.entries(m).forEach(([e,a])=>{a&&t.set(e,a)});try{let e=await fetch(`${s}/installations?${t}`),a=await e.json();i(a.data||[]),n(a.pagination)}catch(e){console.error(e)}finally{c(!1)}},[m]);return(0,a.useEffect)(()=>{h(o)},[o,h]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Search Installations"}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),u(1),h(1)},className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Search"}),(0,t.jsx)("input",{type:"text",value:m.q,onChange:e=>x({...m,q:e.target.value}),placeholder:"Site name, county...",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,t.jsxs)("select",{value:m.state,onChange:e=>x({...m,state:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All States"}),l.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Type"}),(0,t.jsxs)("select",{value:m.site_type,onChange:e=>x({...m,site_type:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"utility",children:"Utility"}),(0,t.jsx)("option",{value:"commercial",children:"Commercial"}),(0,t.jsx)("option",{value:"community",children:"Community"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Size (kW)"}),(0,t.jsx)("input",{type:"number",value:m.min_size,onChange:e=>x({...m,min_size:e.target.value}),placeholder:"e.g. 1000",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Size (kW)"}),(0,t.jsx)("input",{type:"number",value:m.max_size,onChange:e=>x({...m,max_size:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,t.jsx)("input",{type:"date",value:m.start_date,onChange:e=>x({...m,start_date:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,t.jsx)("input",{type:"date",value:m.end_date,onChange:e=>x({...m,end_date:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-blue-700",children:"Search"})})]})}),r?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Searching..."}):(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[d.total.toLocaleString()," results found"]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Site"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"State"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Type"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium text-gray-500",children:"Capacity"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Date"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Tracking"})]})}),(0,t.jsxs)("tbody",{children:[e.map(e=>(0,t.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("a",{href:`/solar/site/?id=${e.id}`,className:"text-blue-600 hover:underline font-medium",children:e.site_name||e.county||"Unknown"}),e.county&&e.site_name&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:e.county})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.state}),(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.site_type}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono",children:e.capacity_mw?`${Number(e.capacity_mw).toFixed(1)} MW`:e.capacity_dc_kw?`${Number(e.capacity_dc_kw).toLocaleString()} kW`:"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.install_date?.substring(0,4)||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.tracking_type||"-"})]},e.id)),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-400",children:"No results found"})})]})]})}),d&&d.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===o,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",o," of ",d.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>u(e=>Math.min(d.totalPages,e+1)),disabled:o>=d.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}e.s(["default",()=>i])}]);