(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88249,(e,t,s)=>{t.exports=e.r(50934)},69824,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let l=e.r(30438);function a({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new l.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},30434,(e,t,s)=>{"use strict";function l(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return l}})},33737,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return d}});let l=e.r(10267),a=e.r(92395),n=e.r(34767),r=e.r(30434),i=e.r(45679);function d({moduleIds:e}){if("u">typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let l=t.reactLoadableManifest;for(let t of e){if(!l[t])continue;let e=l[t].files;s.push(...e)}}if(0===s.length)return null;let d=(0,i.getDeploymentIdQueryOrEmptyString)();return(0,l.jsx)(l.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,r.encodeURIPath)(e)}${d}`;return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},72957,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let l=e.r(10267),a=e.r(56068),n=e.r(69824),r=e.r(33737);function i(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...d,...e},s=(0,a.lazy)(()=>t.loader().then(i)),c=t.loading;function o(e){let i=c?(0,l.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,d=!t.ssr||!!t.loading,o=d?a.Suspense:a.Fragment,u=t.ssr?(0,l.jsxs)(l.Fragment,{children:["u"<typeof window?(0,l.jsx)(r.PreloadChunks,{moduleIds:t.modules}):null,(0,l.jsx)(s,{...e})]}):(0,l.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(s,{...e})});return(0,l.jsx)(o,{...d?{fallback:i}:{},children:u})}return o.displayName="LoadableComponent",o}},69782,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let l=e.r(13288)._(e.r(72957));function a(e,t){let s={};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,l.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},30085,e=>{"use strict";var t=e.i(10267);let s={installer:"bg-blue-100 text-blue-700",owner:"bg-green-100 text-green-700",developer:"bg-purple-100 text-purple-700",operator:"bg-amber-100 text-amber-700",manufacturer:"bg-red-100 text-red-700"};function l({role:e}){let l=s[e]||"bg-gray-100 text-gray-700";return(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium capitalize ${l}`,children:e})}e.s(["default",()=>l])},33704,e=>{"use strict";var t=e.i(10267),s=e.i(56068),l=e.i(88249),a=e.i(69782),n=e.i(30085);let r=(0,a.default)(()=>e.A(73117),{loadableGenerated:{modules:[73383]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-[300px] bg-gray-100 rounded-lg flex items-center justify-center text-gray-400",children:"Loading map..."})}),i="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar";function d(){var e;let a=(0,l.useSearchParams)(),d=a.get("id"),c=a.get("name"),o=a.get("role")||"installer",[u,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,j]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{if(!d&&!c)return;let e=new URLSearchParams;d&&e.set("id",d),c&&e.set("name",c),e.set("role",o),fetch(`${i}/company?${e}`).then(e=>e.json()).then(e=>{if(e.error)throw Error(e.error);m(e.data)}).catch(e=>f(e.message)).finally(()=>h(!1))},[d,c,o]),!d&&!c)return(0,t.jsx)("div",{className:"text-gray-500",children:"No entity ID or name provided"});if(x)return(0,t.jsx)("div",{className:"text-gray-500 py-12 text-center",children:"Loading profile..."});if(p)return(0,t.jsxs)("div",{className:"text-red-600",children:["Error: ",p]});if(!u)return(0,t.jsx)("div",{className:"text-gray-500",children:"Entity not found"});let b=u.states[0]?.count||1,y=Math.max(...u.timeline.map(e=>e.count)||[1],1),N=u.timeline.length>0?`${u.timeline[0].year}\u2013${u.timeline[u.timeline.length-1].year}`:null,v=u.installations.filter(e=>e.latitude&&e.longitude).map(e=>({...e,id:e.id,site_name:e.site_name,site_type:e.site_type,site_status:"active",has_battery_storage:!1,address:null,zip_code:null,county:null,capacity_dc_kw:null,capacity_ac_kw:null,mount_type:null,tracking_type:null,num_modules:null,num_inverters:null,battery_capacity_kwh:null,owner_id:null,owner_name:null,developer_id:null,developer_name:null,operator_id:null,operator_name:null,installer_id:null,installer_name:null,interconnection_date:null,permit_date:null,decommission_date:null,total_cost:null,cost_per_watt:null,data_source_id:null,source_record_id:null,created_at:"",updated_at:""}));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("a",{href:"/solar/directory/",className:"text-blue-600 hover:underline",children:"Directory"}),(0,t.jsx)("span",{className:"text-gray-400 mx-2",children:"/"}),(0,t.jsx)("span",{className:"text-gray-600",children:u.name})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:u.name}),(0,t.jsx)(n.default,{role:u.role}),Object.entries(u.cross_roles||{}).map(([e])=>(0,t.jsx)(n.default,{role:e},e))]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 text-sm text-gray-500",children:[(u.city||u.state)&&(0,t.jsx)("span",{children:[u.city,u.state].filter(Boolean).join(", ")}),u.phone&&(0,t.jsx)("span",{children:u.phone}),u.license_number&&(0,t.jsxs)("span",{children:["License: ",u.license_number]})]}),u.website&&(0,t.jsx)("a",{href:u.website.startsWith("http")?u.website:`https://${u.website}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 mt-3 px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Visit Website"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Installations"}),(0,t.jsx)("div",{className:"text-3xl font-bold mt-1",children:u.site_count.toLocaleString()})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Capacity"}),(0,t.jsx)("div",{className:"text-3xl font-bold mt-1",children:(e=u.capacity_mw)?e>=1e3?`${(e/1e3).toFixed(1)} GW`:e>=1?`${e.toFixed(1)} MW`:`${Math.round(1e3*e)} kW`:"0"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Equipment Records"}),(0,t.jsx)("div",{className:"text-3xl font-bold mt-1",children:u.top_equipment.reduce((e,t)=>e+t.count,0).toLocaleString()})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Years Active"}),(0,t.jsx)("div",{className:"text-3xl font-bold mt-1",children:N||"N/A"})]})]}),Object.keys(u.cross_roles||{}).length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Also Appears As"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(u.cross_roles).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.default,{role:e}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["on ",Number(s).toLocaleString()," site",1!==Number(s)?"s":""]})]},e))})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[u.states.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"State Distribution"}),(0,t.jsx)("div",{className:"space-y-2",children:u.states.slice(0,12).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 text-sm font-bold text-gray-600",children:e.state}),(0,t.jsx)("div",{className:"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${e.count/b*100}%`}})}),(0,t.jsx)("span",{className:"text-sm font-mono w-16 text-right",children:e.count.toLocaleString()})]},e.state))})]}),u.timeline.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Activity Timeline"}),(0,t.jsx)("div",{className:"space-y-1",children:u.timeline.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-12 text-sm text-gray-600",children:e.year}),(0,t.jsx)("div",{className:"flex-1 bg-gray-100 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-green-500 h-full rounded-full",style:{width:`${e.count/y*100}%`}})}),(0,t.jsx)("span",{className:"text-sm font-mono w-12 text-right",children:e.count.toLocaleString()})]},e.year))})]})]}),u.top_equipment.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"manufacturer"===u.role?"Top Models":"Top Equipment Brands"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-left text-gray-500 border-b",children:[(0,t.jsx)("th",{className:"pb-2 pr-4",children:"manufacturer"===u.role?"Model":"Brand"}),"manufacturer"===u.role&&(0,t.jsx)("th",{className:"pb-2 pr-4",children:"Type"}),(0,t.jsx)("th",{className:"pb-2 text-right",children:"Count"})]})}),(0,t.jsx)("tbody",{children:u.top_equipment.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b last:border-0",children:[(0,t.jsx)("td",{className:"py-2 pr-4 font-medium",children:"manufacturer"===u.role?e.name||(0,t.jsx)("span",{className:"text-gray-300",children:"Unknown"}):(0,t.jsx)("a",{href:`/solar/company/?name=${encodeURIComponent(e.name)}&role=manufacturer`,className:"text-blue-600 hover:underline",children:e.name})}),"manufacturer"===u.role&&(0,t.jsx)("td",{className:"py-2 pr-4 capitalize text-gray-500",children:e.type||"-"}),(0,t.jsx)("td",{className:"py-2 text-right font-mono",children:e.count.toLocaleString()})]},s))})]})})]}),v.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Installation Map"}),(0,t.jsx)("button",{onClick:()=>j(!g),className:"text-sm text-blue-600 hover:underline",children:g?"Hide Map":"Show Map"})]}),g&&(0,t.jsx)(r,{installations:v,height:"400px"})]}),u.installations.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["Recent Installations (",u.installations.length," of ",u.site_count.toLocaleString(),")"]}),"manufacturer"!==u.role&&u.id&&(0,t.jsxs)("a",{href:`/solar/search/?${"installer"===u.role?"installer":"owner"===u.role?"owner":"q"}=${encodeURIComponent(u.name)}`,className:"text-sm text-blue-600 hover:underline",children:["View all ",u.site_count.toLocaleString()," installations"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-left text-gray-500 border-b",children:[(0,t.jsx)("th",{className:"pb-2 pr-4",children:"Name"}),(0,t.jsx)("th",{className:"pb-2 pr-4",children:"Location"}),(0,t.jsx)("th",{className:"pb-2 pr-4",children:"Type"}),(0,t.jsx)("th",{className:"pb-2 pr-4 text-right",children:"Capacity"}),(0,t.jsx)("th",{className:"pb-2",children:"Date"})]})}),(0,t.jsx)("tbody",{children:u.installations.map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-2 pr-4",children:(0,t.jsx)("a",{href:`/solar/site/?id=${e.id}`,className:"text-blue-600 hover:underline",children:e.site_name||"Unknown"})}),(0,t.jsx)("td",{className:"py-2 pr-4 text-gray-500",children:[e.city,e.state].filter(Boolean).join(", ")||"-"}),(0,t.jsx)("td",{className:"py-2 pr-4 capitalize",children:e.site_type}),(0,t.jsx)("td",{className:"py-2 pr-4 text-right font-mono",children:e.capacity_mw?`${Number(e.capacity_mw).toFixed(1)} MW`:"-"}),(0,t.jsx)("td",{className:"py-2 text-gray-500",children:e.install_date?.substring(0,4)||"-"})]},e.id))})]})})]})]})}function c(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"text-gray-500 py-12 text-center",children:"Loading..."}),children:(0,t.jsx)(d,{})})}e.s(["default",()=>c])},73117,e=>{e.v(t=>Promise.all(["static/chunks/47e9edc23bd5df3a.js"].map(t=>e.l(t))).then(()=>t(73383)))}]);