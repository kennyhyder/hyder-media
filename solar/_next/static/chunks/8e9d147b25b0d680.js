(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88249,(e,t,a)=>{t.exports=e.r(50934)},9838,e=>{"use strict";var t=e.i(10267),a=e.i(56068),s=e.i(88249);let r="localhost"===window.location.hostname?"http://localhost:3000/api/solar":"/api/solar",l=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function n({label:e,sortKey:a,currentSort:s,currentDir:r,onSort:l,align:n}){let c=s===a;return(0,t.jsxs)("th",{className:`${"right"===n?"text-right":"text-left"} px-4 py-3 font-medium text-gray-500 cursor-pointer hover:text-gray-900 select-none`,onClick:()=>l(a),children:[e," ",(0,t.jsx)("span",{className:c?"text-blue-600":"text-gray-300",children:c?"asc"===r?"▲":"▼":"▴"})]})}function c(){let e=(0,s.useSearchParams)(),[c,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[x,p]=(0,a.useState)({manufacturer:e.get("manufacturer")||"",model:e.get("model")||"",equipment_type:e.get("equipment_type")||"",min_age_years:e.get("min_age_years")||"",state:e.get("state")||""}),[h,y]=(0,a.useState)(1),[g,j]=(0,a.useState)("capacity"),[b,N]=(0,a.useState)("desc"),[f,v]=(0,a.useState)(!1),S={equipment_type:"equipment_type",manufacturer:"manufacturer",technology:"manufacturer",site:"manufacturer",location:"state",capacity:"capacity_mw",year:"install_date"},w=(0,a.useCallback)(async e=>{u(!0);let t=new URLSearchParams({page:String(e),limit:"25"});Object.entries(x).forEach(([e,a])=>{a&&t.set(e,a)});let a=S[g]||"manufacturer";t.set("sort",a),t.set("order",b),f&&t.set("include_empty","true");try{let e=await fetch(`${r}/equipment?${t}`),a=await e.json();i(a.data||[]),d(a.pagination)}catch(e){console.error(e)}finally{u(!1)}},[x,g,b,f]);(0,a.useEffect)(()=>{w(h)},[h,w]);let _=e=>{g===e?N(e=>"asc"===e?"desc":"asc"):(j(e),N("capacity"===e?"desc":"asc")),y(1)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Equipment Search"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Search solar equipment across all installations by manufacturer, model, and age"})]}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),y(1),w(1)},className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manufacturer"}),(0,t.jsx)("input",{type:"text",value:x.manufacturer,onChange:e=>p({...x,manufacturer:e.target.value}),placeholder:"e.g. First Solar",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,t.jsx)("input",{type:"text",value:x.model,onChange:e=>p({...x,model:e.target.value}),placeholder:"e.g. Series 6",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,t.jsxs)("select",{value:x.equipment_type,onChange:e=>p({...x,equipment_type:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"module",children:"Module/Panel"}),(0,t.jsx)("option",{value:"inverter",children:"Inverter"}),(0,t.jsx)("option",{value:"battery",children:"Battery"}),(0,t.jsx)("option",{value:"tracker",children:"Tracker"}),(0,t.jsx)("option",{value:"racking",children:"Racking"}),(0,t.jsx)("option",{value:"transformer",children:"Transformer"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,t.jsxs)("select",{value:x.state,onChange:e=>p({...x,state:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"All States"}),l.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Age (years)"}),(0,t.jsx)("input",{type:"number",value:x.min_age_years,onChange:e=>p({...x,min_age_years:e.target.value}),placeholder:"e.g. 10",className:"w-full border rounded-md px-3 py-2 text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-green-700",children:"Search Equipment"})})]})}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer select-none",children:[(0,t.jsx)("input",{type:"checkbox",checked:f,onChange:e=>{v(e.target.checked),y(1)},className:"rounded border-gray-300"}),"Include records without manufacturer/model"]})}),m?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Searching..."}):(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[o.total.toLocaleString()," equipment records found"]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)(n,{label:"Type",sortKey:"equipment_type",currentSort:g,currentDir:b,onSort:_}),(0,t.jsx)(n,{label:"Manufacturer",sortKey:"manufacturer",currentSort:g,currentDir:b,onSort:_}),(0,t.jsx)(n,{label:"Technology",sortKey:"technology",currentSort:g,currentDir:b,onSort:_}),(0,t.jsx)(n,{label:"Site",sortKey:"site",currentSort:g,currentDir:b,onSort:_}),(0,t.jsx)(n,{label:"Location",sortKey:"location",currentSort:g,currentDir:b,onSort:_}),(0,t.jsx)(n,{label:"Capacity",sortKey:"capacity",currentSort:g,currentDir:b,onSort:_,align:"right"}),(0,t.jsx)(n,{label:"Year",sortKey:"year",currentSort:g,currentDir:b,onSort:_})]})}),(0,t.jsxs)("tbody",{children:[c.map(e=>(0,t.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 capitalize",children:e.equipment_type}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[e.manufacturer||(0,t.jsx)("span",{className:"text-gray-300",children:"-"}),e.model&&(0,t.jsx)("div",{className:"text-xs text-gray-400",children:e.model})]}),(0,t.jsxs)("td",{className:"px-4 py-3 text-gray-500",children:[e.module_technology||(0,t.jsx)("span",{className:"text-gray-300",children:"-"}),e.module_wattage_w&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[e.module_wattage_w,"W"]})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("a",{href:`/solar/site/?id=${e.installation.id}`,className:"text-blue-600 hover:underline",children:e.installation.site_name||"Unknown"})}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[e.installation.state,e.installation.county&&(0,t.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.installation.county,")"]})]}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono",children:e.installation.capacity_mw?`${Number(e.installation.capacity_mw).toFixed(1)} MW`:"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500",children:e.installation.install_date?.substring(0,4)||"-"})]},e.id)),0===c.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-400",children:"No equipment found. Try adjusting your search."})})]})]})}),o&&o.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>y(e=>Math.max(1,e-1)),disabled:1===h,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",h," of ",o.totalPages.toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>y(e=>Math.min(o.totalPages,e+1)),disabled:h>=o.totalPages,className:"px-4 py-2 border rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}function i(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading equipment search..."}),children:(0,t.jsx)(c,{})})}e.s(["default",()=>i])}]);