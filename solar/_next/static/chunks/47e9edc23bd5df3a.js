(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58884,e=>{"use strict";var t=e.i(10267),r=e.i(56068);function a({installations:a,center:l=[39.8,-98.5],zoom:i=4,height:s="400px",onMarkerClick:n}){let o=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);return((0,r.useEffect)(()=>{u(!0)},[]),(0,r.useEffect)(()=>{let t;if(!c||!o.current)return;let r=!1;return(async()=>{let s=await e.A(33390);if(await e.A(53404),delete s.Icon.Default.prototype._getIconUrl,s.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),r||!o.current)return;m.current&&m.current.remove(),m.current=t=s.map(o.current).setView(l,i);let c=s.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri",maxZoom:19}),u=s.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19});c.addTo(t),s.control.layers({Satellite:c,Street:u},{},{position:"topright"}).addTo(t);let d={utility:"#2563eb",commercial:"#16a34a",community:"#9333ea"},p=new s.MarkerClusterGroup({chunkedLoading:!0,maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:14}),f=a.filter(e=>e.latitude&&e.longitude);for(let e of f){let t=d[e.site_type]||"#6b7280",r=e.capacity_mw?`${Number(e.capacity_mw).toFixed(1)} MW`:e.capacity_dc_kw?`${Number(e.capacity_dc_kw).toLocaleString()} kW`:"Unknown",a=s.circleMarker([Number(e.latitude),Number(e.longitude)],{radius:Math.min(12,Math.max(4,3*Math.log2((Number(e.capacity_mw)||.1)+1))),fillColor:t,color:"#fff",weight:1,fillOpacity:.7});a.bindPopup(`<div style="min-width:180px">
            <strong>${e.site_name||e.county||"Unknown"}</strong><br/>
            <span style="color:${t};font-weight:600;text-transform:capitalize">${e.site_type}</span><br/>
            ${r}<br/>
            ${[e.city,e.county,e.state].filter(Boolean).join(", ")}<br/>
            ${e.install_date?`Installed: ${e.install_date.substring(0,4)}`:""}
            ${n?`<br/><a href="/solar/site/?id=${e.id}" style="color:#2563eb">View Details &rarr;</a>`:""}
          </div>`),n&&a.on("click",()=>n(e.id)),p.addLayer(a)}if(t.addLayer(p),f.length>0){let e=s.latLngBounds(f.map(e=>[Number(e.latitude),Number(e.longitude)]));t.fitBounds(e,{padding:[20,20],maxZoom:12})}})(),()=>{r=!0,m.current&&(m.current.remove(),m.current=null)}},[c,a,l,i,n]),c)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"}),(0,t.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"}),(0,t.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"}),(0,t.jsx)("div",{ref:o,style:{height:s},className:"rounded-lg z-0"})]}):(0,t.jsx)("div",{style:{height:s},className:"bg-gray-100 rounded-lg flex items-center justify-center text-gray-400",children:"Loading map..."})}e.s(["default",()=>a])},73383,e=>{e.n(e.i(58884))},33390,e=>{e.v(t=>Promise.all(["static/chunks/e077fa7ba4c949db.js"].map(t=>e.l(t))).then(()=>t(35315)))},53404,e=>{e.v(t=>Promise.all(["static/chunks/76e7607ff3f94399.js"].map(t=>e.l(t))).then(()=>t(87079)))}]);